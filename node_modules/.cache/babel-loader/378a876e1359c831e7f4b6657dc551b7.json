{"ast":null,"code":"import _regeneratorRuntime from\"/Users/maclyuqi/clothes-store/MyProfolio/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/maclyuqi/clothes-store/MyProfolio/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/Users/maclyuqi/clothes-store/MyProfolio/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/maclyuqi/clothes-store/MyProfolio/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/maclyuqi/clothes-store/MyProfolio/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{createAuthUserWithEmailAndPassword,createUserDocFrom}from\"../../utilities/firebase.utils\";import Forminput from\"../form-input/form-input.component\";import'./sign-up-form.scss';import Button from\"../cutombutton/custombutton.component\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var defaultformcontent=[{displayName:'',email:'',password:'',confirmPassword:''}];var Signup=function Signup(){//initialize formfields\nvar _useState=useState(defaultformcontent),_useState2=_slicedToArray(_useState,2),formfields=_useState2[0],setformfields=_useState2[1];//destrcuture formfields\nvar displayName=formfields.displayName,email=formfields.email,password=formfields.password,confirmPassword=formfields.confirmPassword;var resetFormfields=function resetFormfields(){//do not refresh page?????????????\nsetformfields(defaultformcontent);};//console.log(formfields);\nvar resetPasswordFormfields=function resetPasswordFormfields(){formfields.password='';formfields.confirmPassword='';//console.log(formfields);\n};var handleChange=function handleChange(event){var _event$target=event.target,name=_event$target.name,value=_event$target.value;setformfields(_objectSpread(_objectSpread({},formfields),{},_defineProperty({},name,value)));};//注册事件，register\nvar SubmitHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _yield$createAuthUser,user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0://alert(\"submit sucess\");\nevent.preventDefault();///阻止所有默认的表单操作，自动刷新页面等\nif(!(password===confirmPassword)){_context.next=18;break;}_context.prev=2;_context.next=5;return createAuthUserWithEmailAndPassword(email,password);case 5:_yield$createAuthUser=_context.sent;user=_yield$createAuthUser.user;_context.next=9;return createUserDocFrom(user,{displayName:displayName});case 9:resetFormfields();//刷新表单 \n_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);if(_context.t0.code==='auth/email-already-in-use'){alert(\"email already in use\");}else if(_context.t0.code==='auth/weak-password'){alert(\"password at least 6\");}else{console.log(\"submit failed\",_context.t0);}resetFormfields();case 16:_context.next=21;break;case 18:alert(\"confirm password failed\");console.log(\"confirm password wrong\");resetFormfields();case 21:case\"end\":return _context.stop();}}},_callee,null,[[2,12]]);}));return function SubmitHandler(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"sign-up-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:SubmitHandler,children:[/*#__PURE__*/_jsx(Forminput,{label:\"displayName\",required:true,onChange:handleChange,name:\"displayName\",value:displayName}),/*#__PURE__*/_jsx(Forminput,{label:\"Email\",type:\"email\",required:true,onChange:handleChange,name:\"email\",value:email}),/*#__PURE__*/_jsx(Forminput,{label:\"Password\",type:\"password\",required:true,onChange:handleChange,name:\"password\",value:password}),/*#__PURE__*/_jsx(Forminput,{label:\"confirmPassword\",type:\"password\",required:true,onChange:handleChange,name:\"confirmPassword\",value:confirmPassword}),/*#__PURE__*/_jsx(Button,{buttontype:\"google\",type:\"submit\",children:\"sign up\"})]})});};export default Signup;","map":{"version":3,"names":["useState","createAuthUserWithEmailAndPassword","createUserDocFrom","Forminput","Button","defaultformcontent","displayName","email","password","confirmPassword","Signup","formfields","setformfields","resetFormfields","resetPasswordFormfields","handleChange","event","target","name","value","SubmitHandler","preventDefault","user","code","alert","console","log"],"sources":["/Users/maclyuqi/clothes-store/MyProfolio/src/component/signup/signup.component.jsx"],"sourcesContent":["\nimport { useState } from \"react\";\nimport {createAuthUserWithEmailAndPassword, createUserDocFrom } from \"../../utilities/firebase.utils\";\nimport Forminput from \"../form-input/form-input.component\";\nimport './sign-up-form.scss'\nimport Button from \"../cutombutton/custombutton.component\";\nconst defaultformcontent = [{\n    displayName : '',\n    email :'',\n    password : '',\n    confirmPassword :'',\n}]\n\nconst Signup = () => {\n   \n    //initialize formfields\n    const [formfields,setformfields] = useState(defaultformcontent);\n   \n    //destrcuture formfields\n    const {displayName,email,password,confirmPassword} = formfields;\n\n    const resetFormfields = () =>\n    {\n        //do not refresh page?????????????\n        setformfields(defaultformcontent);\n    }\n    //console.log(formfields);\n    const resetPasswordFormfields = () =>\n    {\n        formfields.password = '';\n        formfields.confirmPassword = '';\n        //console.log(formfields);\n    }\n\n    const handleChange = (event) =>{\n        const {name,value} = event.target;\n        setformfields({...formfields,[name]:value});\n    }\n    //注册事件，register\n    const SubmitHandler = async (event) =>\n    {\n        //alert(\"submit sucess\");\n        event.preventDefault();///阻止所有默认的表单操作，自动刷新页面等\n        \n        if(password === confirmPassword)\n        {\n            try{\n                //存储auth信息\n               const {user} = await createAuthUserWithEmailAndPassword(email,password);\n               //const {user} = response;\n               //存入数据库firestore\n               await createUserDocFrom(user,{displayName});\n               resetFormfields();//刷新表单 \n            }\n            catch(error)\n            {\n                if(error.code === 'auth/email-already-in-use') \n                {\n                    alert(\"email already in use\");\n                }\n                else if(error.code === 'auth/weak-password')\n                {\n                    alert(\"password at least 6\")\n                }\n                else \n                {\n                    console.log(\"submit failed\",error);\n                }\n                resetFormfields();\n                \n            }\n            \n        }\n        else\n        {\n            alert(\"confirm password failed\");\n            console.log(\"confirm password wrong\");\n            resetFormfields();  \n        }\n\n        \n\n    }\n    return(\n        \n        <div className=\"sign-up-container\">\n            \n            <form onSubmit={SubmitHandler}>\n                \n                {/* <Forminput label=\"username\" \n                inputoption = {{\n                    type : \"text\" ,\n                    required : true,\n                    onChange : handleChange ,\n                    name : \"username\" ,\n                    value : \"username\" ,\n                    }}></Forminput> */}\n                \n                <Forminput label=\"displayName\" required onChange={handleChange} name = \"displayName\" value = {displayName}></Forminput>\n                <Forminput label=\"Email\"  type = \"email\" required onChange={handleChange} name = \"email\" value = {email}></Forminput>\n               \n                <Forminput label=\"Password\"  type = \"password\" required onChange={handleChange} name = \"password\" value = {password}></Forminput>\n\n                <Forminput label=\"confirmPassword\"  type=\"password\" required onChange={handleChange} name = \"confirmPassword\" value = {confirmPassword}></Forminput>\n                <Button buttontype = \"google\" type=\"submit\" >sign up</Button>\n            </form>\n            \n        </div>\n        \n    )\n}\n\nexport default Signup;"],"mappings":"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"},"metadata":{},"sourceType":"module"}