{"ast":null,"code":"import _slicedToArray from\"/Users/maclyuqi/clothes-store/MyProfolio/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"/Users/maclyuqi/clothes-store/MyProfolio/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/maclyuqi/clothes-store/MyProfolio/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createContext,useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var ClearCartItem=function ClearCartItem(cartItems,productToClear){//product:id,name,imageUrl,price\n//search in cartitems list find the same product\nvar existingItem=cartItems.find(function(item){return item.id===productToClear.id?item:null;});if(existingItem)return cartItems.filter(function(item){return item.id!==existingItem.id;});};var rmCartItem=function rmCartItem(cartItems,productToRm){//product:id,name,imageUrl,price\n//search in cartitems list find the same product\nvar existingItem=cartItems.find(function(item){return item.id===productToRm.id?item:null;});//如果 num = 1 需要改变长度，用filter返回除了目标item的数组 \nif(existingItem.quantity===1)return cartItems.filter(function(item){return item.id!==existingItem.id;});else{//存在的话返回映射，改变数组数值，不改变长度\nreturn cartItems.map(function(item){if(item.id===productToRm.id){return _objectSpread(_objectSpread({},productToRm),{},{quantity:item.quantity-=1});//?++ not working??\n}else return item;});}};var addCartItem=function addCartItem(cartItems,productToAdd){//product:id,name,imageUrl,price\n//search in cartitems list find the same product\nvar existingItem=cartItems.find(function(item){return item.id===productToAdd.id?item:null;});//if exist quantity ++\nif(existingItem){//存在的话返回映射，改变数组数值，不改变长度\nreturn cartItems.map(function(item){if(item.id===productToAdd.id){return _objectSpread(_objectSpread({},productToAdd),{},{quantity:item.quantity+=1});//?++ not working??\n}else return item;});}else return[].concat(_toConsumableArray(cartItems),[_objectSpread(_objectSpread({},productToAdd),{},{quantity:1})]);};export var CartContext=/*#__PURE__*/createContext({isCartOpen:false,setIsCartOpen:function setIsCartOpen(){},cartItems:[],addItemToCart:function addItemToCart(){},cartCount:0,removeItemfromCart:function removeItemfromCart(){},ClearitemfromCart:function ClearitemfromCart(){},cartTotal:0});export var CartProvider=function CartProvider(_ref){var children=_ref.children;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isCartOpen=_useState2[0],setIsCartOpen=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cartItems=_useState4[0],setCartItems=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),cartCount=_useState6[0],setcartCount=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),cartTotal=_useState8[0],setCartTotal=_useState8[1];//total price\nuseEffect(function(){var newcartTotal=cartItems.reduce(function(callbackTotal,cartItem){return callbackTotal+cartItem.quantity*cartItem.price;},0);////reduce?????\nsetCartTotal(newcartTotal);},[cartItems]);//total amounts\nuseEffect(function(){var newcartCount=cartItems.reduce(function(callbackTotal,cartItem){return callbackTotal+cartItem.quantity;},0);////reduce?????\nsetcartCount(newcartCount);},[cartItems]);var addItemToCart=function addItemToCart(productToAdd){//setitem change states\nsetCartItems(addCartItem(cartItems,productToAdd));};var removeItemfromCart=function removeItemfromCart(productToRemove){setCartItems(rmCartItem(cartItems,productToRemove));};var ClearitemfromCart=function ClearitemfromCart(productToClear){setCartItems(ClearCartItem(cartItems,productToClear));};//mvc model clear返回新数据，然后set改变数据层面后刷新改变view\nvar value={isCartOpen:isCartOpen,setIsCartOpen:setIsCartOpen,cartItems:cartItems,addItemToCart:addItemToCart,removeItemfromCart:removeItemfromCart,ClearitemfromCart:ClearitemfromCart,cartCount:cartCount,cartTotal:cartTotal};return/*#__PURE__*/_jsx(CartContext.Provider,{value:value,children:children});};","map":{"version":3,"names":["createContext","useEffect","useState","ClearCartItem","cartItems","productToClear","existingItem","find","item","id","filter","rmCartItem","productToRm","quantity","map","addCartItem","productToAdd","CartContext","isCartOpen","setIsCartOpen","addItemToCart","cartCount","removeItemfromCart","ClearitemfromCart","cartTotal","CartProvider","children","setCartItems","setcartCount","setCartTotal","newcartTotal","reduce","callbackTotal","cartItem","price","newcartCount","productToRemove","value"],"sources":["/Users/maclyuqi/clothes-store/MyProfolio/src/context/cart-context.context.jsx"],"sourcesContent":["import { createContext, useEffect, useState } from \"react\";\nconst ClearCartItem = (cartItems, productToClear) => {\n    //product:id,name,imageUrl,price\n    //search in cartitems list find the same product\n    const existingItem = cartItems.find((item)=>(item.id === productToClear.id)?item:null)\n     \n    if(existingItem)\n    return cartItems.filter((item)=>(item.id !== existingItem.id))\n}\nconst rmCartItem = (cartItems, productToRm) => {\n    //product:id,name,imageUrl,price\n    //search in cartitems list find the same product\n    const existingItem = cartItems.find((item)=>(item.id === productToRm.id)?item:null)\n    //如果 num = 1 需要改变长度，用filter返回除了目标item的数组 \n    if(existingItem.quantity === 1)\n    return cartItems.filter((item)=>(item.id !== existingItem.id))\n    else\n    {\n     //存在的话返回映射，改变数组数值，不改变长度\n     return cartItems.map((item)=>\n         {\n             if(item.id === productToRm.id)\n             {\n                 return {...productToRm,quantity:item.quantity-=1}//?++ not working??\n             }\n             else\n             return item;\n         }\n     )     \n    }\n}\nconst addCartItem = (cartItems, productToAdd) => {\n       //product:id,name,imageUrl,price\n       //search in cartitems list find the same product\n       const existingItem = cartItems.find((item)=>(item.id === productToAdd.id)?item:null)\n       //if exist quantity ++\n       if(existingItem)\n       {\n        //存在的话返回映射，改变数组数值，不改变长度\n        return cartItems.map((item)=>\n            {\n                if(item.id === productToAdd.id)\n                {\n                    return {...productToAdd,quantity:item.quantity+=1}//?++ not working??\n                }\n                else\n                return item;\n            }\n        )     \n       }\n       else\n       return [...cartItems,{...productToAdd,quantity:1}]\n}\n\nexport const CartContext = createContext({\n    isCartOpen : false,\n    setIsCartOpen : ()=>{},\n    cartItems : [],\n    addItemToCart:()=>{},\n    cartCount : 0,\n    removeItemfromCart : ()=>{},\n    ClearitemfromCart : ()=>{},\n    cartTotal : 0,\n})\n\nexport const CartProvider = ({children}) => {\n    const [isCartOpen,setIsCartOpen] = useState(false) ;\n    const [cartItems,setCartItems] = useState([]);\n    const [cartCount,setcartCount] = useState();\n    const [cartTotal,setCartTotal] = useState();\n    //total price\n    useEffect(()=>{\n        const newcartTotal = cartItems.reduce((callbackTotal,cartItem)=>{\n            return callbackTotal + (cartItem.quantity * cartItem.price)\n        },0)////reduce?????\n        setCartTotal(newcartTotal);\n    },[cartItems]);\n    //total amounts\n    useEffect(()=>{\n        const newcartCount = cartItems.reduce((callbackTotal,cartItem)=>{\n            return callbackTotal + cartItem.quantity\n        },0)////reduce?????\n        setcartCount(newcartCount);\n    },[cartItems]);\n\n    const addItemToCart = (productToAdd) => {\n        //setitem change states\n        setCartItems(addCartItem(cartItems,productToAdd));\n    }\n    const removeItemfromCart = (productToRemove) =>{\n        setCartItems(rmCartItem(cartItems,productToRemove));\n    }\n    const ClearitemfromCart = (productToClear) => {\n        setCartItems(ClearCartItem(cartItems,productToClear))\n    }\n    //mvc model clear返回新数据，然后set改变数据层面后刷新改变view\n    \n\n    const value = {isCartOpen,setIsCartOpen,cartItems,addItemToCart,removeItemfromCart,ClearitemfromCart,cartCount,cartTotal};\n\n    return <CartContext.Provider value={value}>{children}</CartContext.Provider>\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}